<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Data Field Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617;
            margin: 0;
            overflow: hidden;
        }
        /* Custom scrollbar for trend history if needed */
        .shadow-inner {
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react?deps=react@18.2.0",
        "framer-motion": "https://esm.sh/framer-motion?deps=react@18.2.0"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { motion, AnimatePresence } from 'framer-motion';
        import { 
            BarChart3, Settings, Database, TrendingUp, Cpu, 
            Lightbulb, Cloud, LineChart, ShieldCheck, X, 
            Activity, Zap, ChevronDown, Clock 
        } from 'lucide-react';

        // Animation variants
        const driftVariants = {
            animate: (custom) => ({
                rotate: [0, 180, 360],
                scale: [1, 1.1, 1],
                transition: {
                    duration: custom, 
                    repeat: Infinity,
                },
            }),
        };

        const flowVariants = {
            animate: {
                top: ["0%", "100%"],
                opacity: [0, 1, 0],
                scale: [0.8, 1.2, 0.8],
                transition: {
                    duration: 2,
                    repeat: Infinity,
                }
            }
        };

        const containerVariants = {
            hidden: { opacity: 0 },
            visible: {
                opacity: 1,
                transition: {
                    staggerChildren: 0.1,
                    delayChildren: 0.2
                }
            }
        };

        const itemVariants = {
            hidden: { opacity: 0, y: 15, filter: "blur(4px)" },
            visible: { 
                opacity: 1, 
                y: 0, 
                filter: "blur(0px)",
                transition: {
                    type: "spring",
                    stiffness: 100,
                    damping: 15
                }
            }
        };

        const stageDetails = {
            dataIn: {
                title: "Data Ingestion",
                color: "blue",
                metrics: [
                    { label: "Latency", value: "8ms", icon: Zap },
                    { label: "Loss", value: "0.01%", icon: ShieldCheck },
                    { label: "Nodes", value: "42", icon: Database }
                ],
                history: [45, 60, 55, 70, 65, 80, 75, 90, 85, 95]
            },
            processed: {
                title: "Neural Core",
                color: "indigo",
                metrics: [
                    { label: "Throughput", value: "98%", icon: Activity },
                    { label: "Check", value: "Clean", icon: ShieldCheck },
                    { label: "Load", value: "34%", icon: Cpu }
                ],
                history: [30, 40, 35, 50, 45, 60, 55, 65, 60, 70]
            },
            insights: {
                title: "Predictive Engine",
                color: "fuchsia",
                metrics: [
                    { label: "Conf.", value: "94%", icon: Lightbulb },
                    { label: "Signals", value: "12", icon: TrendingUp },
                    { label: "ROI", value: "+15%", icon: BarChart3 }
                ],
                history: [50, 65, 70, 85, 80, 92, 90, 95, 98, 92]
            }
        };

        function StageCard({ icon: Icon, color, label, title, value, unit, onClick, variants }) {
            const colorMap = {
                blue: "text-blue-400 border-blue-500/20 hover:border-blue-500/50 shadow-blue-500/5 hover:shadow-blue-500/10",
                indigo: "text-indigo-400 border-indigo-500/20 hover:border-indigo-500/50 shadow-indigo-500/5 hover:shadow-indigo-500/10",
                fuchsia: "text-fuchsia-400 border-fuchsia-500/20 hover:border-fuchsia-500/50 shadow-fuchsia-500/5 hover:shadow-fuchsia-500/10",
            };
            const colorClass = colorMap[color] || "text-slate-400 border-slate-500/20";

            return (
                <motion.div 
                    layout
                    variants={variants}
                    onClick={onClick}
                    whileHover={{ scale: 1.02, x: 4 }}
                    whileTap={{ scale: 0.97 }}
                    className={`group cursor-pointer w-full bg-white/[0.02] backdrop-blur-lg border rounded-2xl p-5 flex items-center justify-between transition-all duration-300 ${colorClass}`}
                >
                    <div className="flex items-center gap-5">
                        <div className="p-3.5 rounded-2xl bg-[#020617] border border-white/5 group-hover:border-white/10 transition-colors shadow-lg">
                            <Icon className="w-6 h-6 transition-transform duration-500 group-hover:scale-110" />
                        </div>
                        <div>
                            <span className="text-[10px] font-black uppercase tracking-[0.25em] block opacity-40 mb-1">{label}</span>
                            <h3 className="text-lg font-bold text-white tracking-tight">{title}</h3>
                        </div>
                    </div>
                    <div className="text-right">
                        <AnimatePresence mode="wait">
                            <motion.div 
                                key={value}
                                initial={{ y: 5, opacity: 0, filter: "blur(2px)" }}
                                animate={{ y: 0, opacity: 1, filter: "blur(0px)" }}
                                exit={{ y: -5, opacity: 0, filter: "blur(2px)" }}
                                transition={{ duration: 0.2 }}
                                className="text-2xl font-black text-white flex items-baseline justify-end gap-0.5"
                            >
                                {value}
                                <span className="text-[11px] font-bold opacity-30 ml-0.5">{unit}</span>
                            </motion.div>
                        </AnimatePresence>
                        <div className="flex items-center justify-end gap-1.5 text-[10px] text-emerald-400 font-black mt-1 tracking-wider">
                            <TrendingUp className="w-3.5 h-3.5" /> 
                            <span className="group-hover:translate-x-0.5 transition-transform">FLOW ACTIVE</span>
                        </div>
                    </div>
                </motion.div>
            );
        }

        function VerticalConnector({ color, variants }) {
            return (
                <motion.div layout variants={variants} className={`w-[2px] h-6 bg-gradient-to-b ${color} relative opacity-40`}>
                    <motion.div 
                        variants={flowVariants}
                        animate="animate"
                        className="absolute left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-white shadow-[0_0_12px_white]" 
                    />
                </motion.div>
            );
        }

        function FooterStat({ icon: Icon, label, value, color = "text-white" }) {
            return (
                <div className="flex flex-col gap-1">
                    <div className="flex items-center gap-2 opacity-30">
                        <Icon className="w-3.5 h-3.5" />
                        <span className="text-[10px] uppercase tracking-[0.2em] font-black">{label}</span>
                    </div>
                    <span className={`text-base font-black ${color} tracking-tight`}>{value}</span>
                </div>
            );
        }

        function DataOpsDash() {
            const [stats, setStats] = useState({
                dataIn: 1.2,
                processed: 980,
                insights: 42.5,
                accuracy: 99.8,
            });

            const [selectedStage, setSelectedStage] = useState(null);
            const [showHistory, setShowHistory] = useState(false);
            const [refreshRate, setRefreshRate] = useState(2500);
            const [showSettings, setShowSettings] = useState(false);

            useEffect(() => {
                const interval = setInterval(() => {
                    setStats(prev => ({
                        dataIn: +(prev.dataIn + (Math.random() * 0.02 - 0.01)).toFixed(2),
                        processed: Math.floor(prev.processed + (Math.random() * 10 - 5)),
                        insights: +(prev.insights + (Math.random() * 0.1 - 0.05)).toFixed(1),
                        accuracy: +(99.8 + (Math.random() * 0.1 - 0.05)).toFixed(1),
                    }));
                }, refreshRate);
                return () => clearInterval(interval);
            }, [refreshRate]);

            const handleStageClick = (stage) => {
                setSelectedStage(stage);
                setShowHistory(false);
            };

            return (
                <div className="w-full aspect-square max-w-[600px] flex items-center justify-center font-sans select-none overflow-hidden relative bg-[#020617] rounded-[2.5rem] border border-white/10 shadow-2xl">
                    
                    {/* Ambient Background Nebulae */}
                    <div className="absolute inset-0 z-0 pointer-events-none">
                        <motion.div 
                            custom={40}
                            variants={driftVariants}
                            animate="animate"
                            className="absolute w-[350px] h-[350px] -top-32 -left-32 rounded-full bg-blue-600/10 blur-[80px] opacity-30"
                        />
                        <motion.div 
                            custom={50}
                            variants={driftVariants}
                            animate="animate"
                            className="absolute w-[300px] h-[300px] -bottom-20 -right-20 rounded-full bg-fuchsia-600/10 blur-[80px] opacity-30"
                        />
                    </div>

                    <div className="relative w-full h-full flex flex-col z-10">
                        {/* Header Section */}
                        <header className="px-7 py-6 flex items-center justify-between border-b border-white/5 bg-[#020617]/40 backdrop-blur-xl shrink-0">
                            <div className="flex items-center gap-4">
                                <motion.div 
                                    layout
                                    className="w-11 h-11 rounded-2xl bg-gradient-to-br from-blue-500 via-indigo-500 to-fuchsia-500 p-[1px]"
                                >
                                    <div className="w-full h-full bg-[#020617] rounded-2xl flex items-center justify-center">
                                        <BarChart3 className="w-5 h-5 text-blue-400" />
                                    </div>
                                </motion.div>
                                <div>
                                    <h2 className="text-xl font-bold tracking-tight text-white leading-none">Quantum Dash</h2>
                                    <p className="text-[10px] font-bold uppercase tracking-[0.25em] text-blue-400/80 mt-1.5">Ops Intelligence</p>
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-4 relative">
                                <div className="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.1)]">
                                    <span className="relative flex h-2 w-2">
                                        <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                                        <span className="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                                    </span>
                                    <span className="text-[10px] font-bold text-emerald-400 tracking-wider">SYNCED</span>
                                </div>
                                
                                <button 
                                    onClick={() => setShowSettings(!showSettings)}
                                    className={`p-2.5 rounded-full transition-all duration-300 ${showSettings ? 'bg-white/10 text-white rotate-90' : 'hover:bg-white/5 text-slate-400'}`}
                                >
                                    <Settings className="w-4.5 h-4.5" />
                                </button>
                                
                                <AnimatePresence>
                                    {showSettings && (
                                        <motion.div
                                            initial={{ opacity: 0, y: 15, scale: 0.95 }}
                                            animate={{ opacity: 1, y: 0, scale: 1 }}
                                            exit={{ opacity: 0, y: 10, scale: 0.95 }}
                                            className="absolute top-full right-0 mt-3 w-64 bg-[#0f172a]/90 border border-white/10 rounded-2xl p-6 shadow-2xl z-50 backdrop-blur-2xl"
                                        >
                                            <div className="flex items-center gap-2.5 mb-4 pb-3 border-b border-white/5">
                                                <Clock size={15} className="text-blue-400" />
                                                <span className="text-xs font-bold text-slate-200 uppercase tracking-widest">Configuration</span>
                                            </div>
                                            <div className="space-y-4">
                                                <div className="flex justify-between items-center">
                                                    <span className="text-[11px] text-slate-400 uppercase font-medium">Auto-Refresh</span>
                                                    <span className="text-[11px] font-mono text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded border border-blue-500/20">{refreshRate}ms</span>
                                                </div>
                                                <input 
                                                    type="range" 
                                                    min="500" 
                                                    max="5000" 
                                                    step="500"
                                                    value={refreshRate}
                                                    onChange={(e) => setRefreshRate(Number(e.target.value))}
                                                    className="w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-blue-500 hover:accent-blue-400"
                                                />
                                            </div>
                                        </motion.div>
                                    )}
                                </AnimatePresence>
                            </div>
                        </header>

                        {/* Pipeline Layout */}
                        <motion.main 
                            variants={containerVariants}
                            initial="hidden"
                            animate="visible"
                            className="flex-1 flex flex-col items-center justify-center p-6 gap-1"
                        >
                            <StageCard 
                                variants={itemVariants}
                                icon={Database}
                                color="blue"
                                label="Stage 01"
                                title="Ingestion"
                                value={stats.dataIn}
                                unit="M"
                                onClick={() => handleStageClick('dataIn')}
                            />

                            <VerticalConnector variants={itemVariants} color="from-blue-500/40 via-indigo-500/40 to-indigo-500/20" />

                            <StageCard 
                                variants={itemVariants}
                                icon={Cpu}
                                color="indigo"
                                label="Stage 02"
                                title="Process"
                                value={stats.processed}
                                unit="K"
                                onClick={() => handleStageClick('processed')}
                            />

                            <VerticalConnector variants={itemVariants} color="from-indigo-500/40 via-fuchsia-500/40 to-fuchsia-500/20" />

                            <StageCard 
                                variants={itemVariants}
                                icon={Lightbulb}
                                color="fuchsia"
                                label="Stage 03"
                                title="Analysis"
                                value={stats.insights}
                                unit="K"
                                onClick={() => handleStageClick('insights')}
                            />
                        </motion.main>

                        {/* Global Stats Footer */}
                        <footer className="px-8 py-6 border-t border-white/5 flex items-center justify-between bg-[#020617]/60 backdrop-blur-xl shrink-0">
                            <div className="flex gap-10">
                                <FooterStat icon={Cloud} label="Clusters" value="12" />
                                <FooterStat icon={ShieldCheck} label="Precision" value={`${stats.accuracy}%`} color="text-emerald-400" />
                            </div>
                            <div className="flex items-center gap-2.5 px-3 py-1.5 bg-white/[0.03] rounded-lg border border-white/5">
                                <Activity className="w-3.5 h-3.5 text-blue-500" />
                                <span className="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Secure Path</span>
                            </div>
                        </footer>

                        {/* Detail Modal Overlay */}
                        <AnimatePresence>
                            {selectedStage && (
                                <motion.div
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    exit={{ opacity: 0 }}
                                    className="absolute inset-0 z-[60] flex items-center justify-center bg-black/85 backdrop-blur-[6px] p-6"
                                    onClick={() => setSelectedStage(null)}
                                >
                                    <motion.div
                                        initial={{ y: 80, opacity: 0, scale: 0.95 }}
                                        animate={{ y: 0, opacity: 1, scale: 1 }}
                                        exit={{ y: 60, opacity: 0, scale: 0.95 }}
                                        transition={{ type: "spring", damping: 25, stiffness: 350 }}
                                        onClick={(e) => e.stopPropagation()}
                                        className="w-full max-w-sm bg-[#0f172a] border border-white/10 rounded-[2.5rem] p-8 relative overflow-hidden shadow-[0_0_50px_rgba(0,0,0,0.5)]"
                                    >
                                        <div className="flex justify-between items-start mb-8">
                                            <div>
                                                <h3 className="text-2xl font-bold text-white tracking-tight">{stageDetails[selectedStage].title}</h3>
                                                <p className="text-[10px] text-blue-400 uppercase tracking-[0.3em] font-bold mt-2">Active Telemetry</p>
                                            </div>
                                            <button onClick={() => setSelectedStage(null)} className="p-2 hover:bg-white/10 rounded-full text-slate-400 hover:text-white transition-all">
                                                <X size={22} />
                                            </button>
                                        </div>

                                        <div className="grid grid-cols-3 gap-4 mb-8">
                                            {stageDetails[selectedStage].metrics.map((m, i) => {
                                                const Icon = m.icon;
                                                return (
                                                    <div key={i} className="bg-white/[0.03] rounded-2xl p-4 border border-white/5 flex flex-col items-center hover:bg-white/[0.05] transition-colors">
                                                        <Icon size={16} className="text-blue-400 mb-2.5" />
                                                        <p className="text-[9px] text-slate-400 uppercase tracking-wider mb-1 font-bold">{m.label}</p>
                                                        <p className="text-sm font-bold text-white">{m.value}</p>
                                                    </div>
                                                );
                                            })}
                                        </div>

                                        <button
                                            onClick={() => setShowHistory(!showHistory)}
                                            className="w-full py-4 rounded-2xl bg-white/[0.04] hover:bg-white/[0.08] border border-white/10 text-[11px] uppercase tracking-[0.2em] text-slate-300 hover:text-white transition-all flex items-center justify-center gap-3 font-bold group"
                                        >
                                            <LineChart size={16} className="group-hover:scale-110 transition-transform" />
                                            <span>{showHistory ? 'Minimize Stream' : 'Historic Stream'}</span>
                                            <ChevronDown size={16} className={`transition-transform duration-500 ${showHistory ? 'rotate-180' : ''}`} />
                                        </button>

                                        <AnimatePresence>
                                            {showHistory && (
                                                <motion.div
                                                    initial={{ height: 0, opacity: 0 }}
                                                    animate={{ height: 'auto', opacity: 1 }}
                                                    exit={{ height: 0, opacity: 0 }}
                                                    className="overflow-hidden"
                                                >
                                                    <div className="bg-black/20 rounded-2xl border border-white/5 p-5 mt-5 h-28 flex items-end justify-between gap-1.5 shadow-inner">
                                                        {stageDetails[selectedStage].history.map((h, i) => (
                                                            <motion.div 
                                                                key={i}
                                                                initial={{ height: 0 }}
                                                                animate={{ height: `${h}%` }}
                                                                transition={{ delay: i * 0.02, type: "spring", stiffness: 100 }}
                                                                className="w-full bg-gradient-to-t from-blue-600/60 to-blue-400/80 rounded-t-md shadow-[0_0_10px_rgba(59,130,246,0.3)]"
                                                            />
                                                        ))}
                                                    </div>
                                                </motion.div>
                                            )}
                                        </AnimatePresence>
                                    </motion.div>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </div>
                </div>
            );
        }

        const App = () => {
            return (
                <div className="w-full h-screen flex items-center justify-center bg-[#020617] text-slate-100 p-4 overflow-hidden">
                    <DataOpsDash />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>